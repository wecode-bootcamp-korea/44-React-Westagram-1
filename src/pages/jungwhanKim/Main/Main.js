import React, { useState } from 'react';
import Comment from './Components/Comment/Comment';
import Modal from './Components/Modal/Modal';
import './Main.scss';
// import '../../../assets/jungwhanKim/';

const Main = () => {
  // Í≤ÄÏÉâÏ∞ΩÏóêÍ±∞ Í≤ÄÏÉâ Í∞ÄÎä•Ìïú Í∞íÎì§Í≥º Í∑∏ Î∞∞Ïó¥Ïö© ÌõÖ Ï†ïÏùò

  // '../../../assets/jungwhanKim/profile_hat.jpg'
  const userList = [
    ['georgekim', '../../../assets/jungwhanKim/blue_check.png'],
    ['georgekim_official', '../../../assets/jungwhanKim/profile_dark.jpg'],
    ['google_korea', '../../../assets/jungwhanKim/google.jpeg'],
    ['general_assembly_official', '../../../assets/jungwhanKim/GA.png'],
    ['notion_so_official', '../../../assets/jungwhanKim/notion.jpeg'],
    ['slack_official', '../../../assets/jungwhanKim/slack_hash_256.png'],
    ['wecode', '../../../assets/jungwhanKim/wecode-logo.png'],
    ['wecode_korea', '../../../assets/jungwhanKim/wecode_trans.jpeg'],
    ['wecode_united_states', '../../../assets/jungwhanKim/cowork.jpeg'],
  ];

  // Í≤ÄÏÉâÍ∞íÍ≥º ÏÇ¨Ïö©Ïûê ÏïÑÏù¥ÎîîÍ∞Ä ÏùºÏπòÌï† Ïãú Ìë∏Ïâ¨Ìï† Îπà Î∞∞Ïó¥
  let matchingUsersList = [];

  // Í≤ÄÏÉâÌïú Í∞íÏù¥ userList Í∞íÍ≥º Í≤πÏπ† Ïãú ÏÇ¨Ïö©Ìï† ÏÉÅÌÉúÍ∞íÍ≥º Î≥ÄÍ≤Ω ÌõÖ Ï†ïÏùò
  const [matchingUsers, setMatchingUsers] = useState([]);

  // ÏÉÅÎã® Í≤ÄÏÉâÏ∞ΩÏùò ÏÉÅÌÉúÍ∞í Î∞è Î≥ÄÍ≤ΩÏö© Ï∂ï Ï†ïÏùò
  const [searchInput, setSearchInput] = useState('');

  // ÎåìÍ∏Ä ÏÑπÏÖòÏóê ÎßµÌïëÌï† ÎåìÍ∏Ä Î∞∞Ïó¥ ÏÑ†Ïñ∏
  const [comments, setComments] = useState([]);

  // Ìè¨Ïä§Ìä∏ ÎåìÍ∏Ä Í≤åÏãú Ïù∏ÌíãÏ∞Ω ÏÉÅÌÉúÍ∞í Î∞è Î≥ÄÍ≤ΩÏö© ÌõÖ Ï†ïÏùò
  const [commentInput, setCommentInput] = useState('');

  // ÌîÑÎ°úÌïÑ Î™®Îã¨Ïùò ÏÉÅÌÉú Î∞è Î≥ÄÍ≤ΩÏö© ÌõÖ Ï†ïÏùò
  const [modalOpen, setModalOpen] = useState(false);

  // ÏÉÅÎã® Í≤ÄÏÉâÏ∞ΩÏóê Í∞íÏù¥ ÏûÖÎ†•Îê† Ïãú Ìò∏Ï∂ú
  const handleSearchInput = event => {
    setSearchInput(event.target.value);
    // Í≤ÄÏÉâÏ∞ΩÏóê Ïù∏Ìíã Í∞íÏù¥ ÏûàÍ≥† Í∞íÏù¥ ÏÇ¨Ïö©Ïûê ÏïÑÏù¥ÎîîÏôÄ Í≤πÏπòÎäî Î∂ÄÎ∂ÑÏù¥ ÏûàÎã§Î©¥
    if (searchInput !== '' || searchInput !== null) {
      userList.map(user => {
        if (user[0].indexOf(event.target.value) !== -1) {
          // setSearchInput(event.target.value);
          matchingUsersList.push(user);
          setMatchingUsers(matchingUsersList);
        }
      });
      setMatchingUsers(matchingUsersList);
    }
  };

  // ÎåìÍ∏Ä Í≤åÏãú Ïù∏ÌíãÏ∞Ω ÏÉÅÌÉúÍ∞í Î≥ÄÍ≤ΩÏãú Ìò∏Ï∂ú
  const handleComment = event => {
    setCommentInput(event.target.value);
  };

  const handleSubmit = event => {
    event.preventDefault();
    if (commentInput === '') {
      alert('Í≤åÏãú Ï†Ñ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
      return;
    }

    setComments([...comments, commentInput]);
    // comments.push(commentInput);
    setCommentInput('');
  };

  const handleRemove = id => {
    // newCommentsÎùºÎäî commentsÏùò ÏÉÅÌÉúÍ∞íÏùÑ Î≥µÏÇ¨Ìïú Î∞∞Ïó¥ÏùÑ ÏÉùÏÑ±, Ïù¥ÌõÑ Îß§ÌïëÌïòÏó¨ ÌÅ¥Î¶≠ÌñàÎçò ÏïÑÏù¥ÌÖúÏùò keyÏôÄ indexÍ∞íÏù¥ ÏùºÏπòÌïòÏßÄ ÏïäÏùÄ ÏïÑÏù¥ÌÖúÎì§Îßå filterÌïòÏó¨ ÏÉàÎ°úÏö¥ Î∞∞Ïó¥Ïóê ÏÉùÏÑ±; Ïù¥ÌõÑ Î∞∞Ïó¥ÏùÑ ÏÉà ÏÉÅÌÉúÍ∞íÏúºÎ°ú ÏßÄÏ†ï
    const newComments = comments.filter((item, i) => id !== i);
    setComments(newComments);
  };

  const handleOpenModal = () => {
    setModalOpen(!modalOpen);
  };

  const handleCloseModal = () => {
    setModalOpen(!modalOpen);
  };

  return (
    <div className="main">
      <div className="container">
        {/* <!--ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò Î∞î--> */}
        <div className="navbar">
          <div className="navbar-content">
            {/* <!--Î°úÍ≥†--> */}
            <div className="align-center">
              <div className="wecode-logo" />
              <div className="text-logo">westagram</div>
            </div>
            {/* <!--Í≤ÄÏÉâÏ∞Ω--> */}
            <div className="search-wrapper">
              <input
                className="searchInput"
                type="text"
                placeholder="Í≤ÄÏÉâ"
                value={searchInput}
                onChange={handleSearchInput}
              />
              {/* <!--Í≤ÄÏÉâÏ∞Ω ÏûÖÎ†•ÏùÑ ÏãúÏûëÌï† Ïãú Î≥¥Ïùº Í≤ÄÏÉâ Í≤∞Í≥º--> */}
              <div
                className="results"
                style={{ display: searchInput ? 'block' : 'none' }}
              >
                {matchingUsers.length > 0 ? (
                  matchingUsers.map((item, i) => (
                    <div key={i} className="search-result-wrapper">
                      <div
                        style={{ backgroundImage: `url(${item[1]})` }}
                        className="search-result-img"
                      />
                      <div className="search-result-id">{item[0]}</div>
                    </div>
                  ))
                ) : (
                  <></>
                )}
              </div>
            </div>

            {/* <!--Ïö∞Ï∏° Î©îÎâ¥Îì§--> */}
            <div className="align-center">
              <div className="explore" />
              <div className="heart" />
              <div onClick={handleOpenModal} className="my" />

              {/* <!--ÌîÑÎ°úÌïÑÏù¥ ÌÅ¥Î¶≠ÎêòÎ©¥ Ïó¥Î¶¨Îäî Î™®Îã¨--> */}
              {modalOpen ? <Modal handleCloseModal={handleCloseModal} /> : null}
            </div>
          </div>
        </div>

        <div className="feed-container">
          {/* <!--Ï¢åÏ∏° ÏΩúÎ£∏--> */}
          <div className="feeds-column">
            <div className="feeds">
              {/* <!--Ìè¨Ïä§Ìä∏ Ïª¥Ìè¨ÎÑåÌä∏--> */}
              <div className="article">
                {/* <!--Ìè¨Ïä§Ìä∏ Ï≤´Î≤àÏß∏ Î°úÏö∞--> */}
                <div className="article-top">
                  <div className="align-center">
                    <div className="account-pic" />
                    <div className="account-name">
                      <div className="align-center">
                        <div className="account-name-main">wecode_bootcamp</div>
                        <div className="blue-check" />
                      </div>
                      <div className="account-name-sub">ÏúÑÏõåÌÅ¨ ÏÑ†Î¶â 2Ìò∏Ï†ê</div>
                    </div>
                  </div>
                  <div className="article-menu" />
                </div>
                {/* <!--Ìè¨Ïä§Ìä∏ ÏÇ¨ÏßÑ--> */}
                <div className="post-img" />
                {/* <!--3Î≤àÏß∏ Î°úÏö∞/ÌïòÌä∏, Í≥µÏú† Í∏∞Îä•Îì§--> */}
                <div className="third-row">
                  <div className="align-center">
                    <div className="like-clicked" />
                    <div className="comment-img" />
                    <div className="share-img" />
                  </div>
                  <div className="save-img" />
                </div>
                {/* <!--4Î≤àÏß∏ Î°úÏö∞/Ìè¨Ïä§Ìä∏ ÎùºÏù¥ÌÅ¨ ÏÉÅÌÉú--> */}
                <div className="align-center">
                  <div className="account-pic-sm" />
                  <div className="post-status-msg">
                    <span className="bolded">wecode_bootcamp</span>Îãò{' '}
                    <span className="bolded">Ïô∏ 124Î™Ö</span>Ïù¥ Ï¢ãÏïÑÌï©ÎãàÎã§
                  </div>
                </div>
                {/* dummy comment below */}
                <div className="dummy-comment">
                  <div className="align-center">
                    <div className="comment-id">wecode_bootcamp</div>
                    <div className="align-center">
                      <div>üåäüö¢ 44Í∏∞Îäî Ïò§ÎäòÎèÑ ÏàúÌï≠ Ï§ëÏûÖÎãàÎã§! üôåüôåüôå ...</div>
                      <div className="see-more">Îçî Î≥¥Í∏∞</div>
                    </div>
                  </div>
                </div>
                <div className="comments">
                  {/* <!--Comment components will be mapped below--> */}
                  {comments.map((comment, i) => (
                    <Comment
                      key={i}
                      content={comments[i]}
                      handleRemove={() => handleRemove(i)}
                    />
                  ))}
                </div>
                <div className="time-posted">54Î∂Ñ Ï†Ñ</div>
                <div className="comment-input">
                  {/* <!--ÎåìÍ∏Ä ÏûÖÎ†•Ï∞Ω--> */}
                  <form onSubmit={handleSubmit}>
                    <input
                      name="comment"
                      type="text"
                      placeholder="ÎåìÍ∏Ä Îã¨Í∏∞..."
                      onInput={handleComment}
                      value={commentInput}
                    />
                    {/* <!--Í≤åÏãú Î≤ÑÌäº--> */}
                    <button className="add-button">Í≤åÏãú</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          {/* <!--Ïö∞Ï∏° ÏΩúÎ£∏--> */}
          <div className="main-right">
            <div className="top-right-profile">
              <div className="right-account-pic" />
              <div className="account-name">
                <div className="account-name-main">_georgekim</div>
                <div className="account-name-sub">44Í∏∞ ÍπÄÏ†ïÌôò</div>
              </div>
            </div>
            {/* <!--Ïä§ÌÜ†Î¶¨ ÏãúÏûë Î∂ÄÎ∂Ñ--> */}
            <div className="box">
              <div className="stories-top">
                <div className="stories-header">Ïä§ÌÜ†Î¶¨</div>
                <div className="stories-see-all">Î™®Îëê Î≥¥Í∏∞</div>
              </div>
              {/* <!--Ïä§ÌÜ†Î¶¨ Ïª¥Ìè¨ÎÑåÌä∏Îì§ ÎÇòÏó¥Îêú Î∂ÄÎ∂Ñ--> */}
              <div className="story-component">
                <div className="align-center">
                  <div className="gradient">
                    <div className="account-pic-story" />
                  </div>
                  <div className="account-name">
                    <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                    <div className="account-name-sub">ÏúÑÏΩîÎìú Î≥∏ÏÇ¨(ÏúÑÏõåÌÅ¨)</div>
                  </div>
                </div>
              </div>
              <div className="story-component">
                <div className="align-center">
                  <div className="gradient">
                    <div className="account-pic-story" />
                  </div>
                  <div className="account-name">
                    <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                    <div className="account-name-sub">ÏúÑÏΩîÎìú Î≥∏ÏÇ¨(ÏúÑÏõåÌÅ¨)</div>
                  </div>
                </div>
              </div>
              <div className="story-component">
                <div className="align-center">
                  <div className="gradient">
                    <div className="account-pic-story" />
                  </div>
                  <div className="account-name">
                    <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                    <div className="account-name-sub">ÏúÑÏΩîÎìú Î≥∏ÏÇ¨(ÏúÑÏõåÌÅ¨)</div>
                  </div>
                </div>
              </div>
            </div>
            {/* <!--Ï∂îÏ≤ú ÏãúÏûë Î∂ÄÎ∂Ñ--> */}
            <div className="box">
              <div className="stories-top">
                <div className="stories-header">ÌöåÏõêÎãòÏùÑ ÏúÑÌïú Ï∂îÏ≤ú</div>
                <div className="stories-see-all">Î™®Îëê Î≥¥Í∏∞</div>
              </div>
              {/* <!--ÌåîÎ°úÏö∞ Ï∂îÏ≤ú Ïª¥Ìè¨ÎÑåÌä∏Îì§ ÎÇòÏó¥Îêú Î∂ÄÎ∂Ñ--> */}
              <div className="recommend-component">
                <div className="recomment-wrapper">
                  <div className="align-center">
                    <div className="account-pic" />
                    <div className="account-name">
                      <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                      <div className="account-name-sub">
                        ÌöåÏõêÎãòÏùÑ ÌåîÎ°úÏö∞Ìï©ÎãàÎã§
                      </div>
                    </div>
                  </div>
                  <div className="follow-text">ÌåîÎ°úÏö∞</div>
                </div>
              </div>
              <div className="recommend-component">
                <div className="recomment-wrapper">
                  <div className="align-center">
                    <div className="account-pic" />
                    <div className="account-name">
                      <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                      <div className="account-name-sub">
                        ÌöåÏõêÎãòÏùÑ ÌåîÎ°úÏö∞Ìï©ÎãàÎã§
                      </div>
                    </div>
                  </div>
                  <div className="follow-text">ÌåîÎ°úÏö∞</div>
                </div>
              </div>
              <div className="recommend-component">
                <div className="recomment-wrapper">
                  <div className="align-center">
                    <div className="account-pic" />
                    <div className="account-name">
                      <div className="account-name-main">ÏúÑÏΩîÎìú ÏàòÍ∞ïÏÉù</div>
                      <div className="account-name-sub">
                        ÌöåÏõêÎãòÏùÑ ÌåîÎ°úÏö∞Ìï©ÎãàÎã§
                      </div>
                    </div>
                  </div>
                  <div className="follow-text">ÌåîÎ°úÏö∞</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Main;
